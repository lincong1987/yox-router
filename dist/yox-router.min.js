!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.YoxRouter=n.YoxRouter||{})}(this,function(n){"use strict";function t(n){var t={};return m.is.string(n)&&m.array.each(n.split(j),function(n){var e=n.split("="),r=y(e,2),o=r[0],i=r[1];o&&(t[o]=!m.is.string(i)||decodeURIComponent(i))}),t}function e(n){var t=[];return m.object.each(n,function(n,e){t.push(e+"="+encodeURIComponent(n))}),t.join(j)}function r(n,t){var e={},r=n.split(g);return m.array.each(t.split(g),function(n,t){n.startsWith(x)&&(e[n.slice(x.length)]=r[t])}),e}function o(n){var t=void 0,e=n.split(g);return m.object.each(R,function(n,r){var o=r.split(g);if(e.length===o.length&&(m.array.each(o,function(n,t){if(!n.startsWith(x)&&n!==e[t])return r=null,!1}),r))return t=r,!1}),t}function i(n){if(n.startsWith(w)){n=n.slice(w.length);var e=void 0,i=void 0,u=n.indexOf("?");u>=0?(e=n.substring(0,u),i=n.slice(u+1)):e=n;var a=o(e);if(a)return{path:a,realpath:e,params:r(e,a),query:t(i)}}}function u(n,t,r){var o=[];m.array.each(n.split(g),function(n){o.push(n.startsWith(x)?t[n.slice(1)]:n)});var i=o.join(g);return r&&(r=e(r),r&&(i+="?"+r)),w+i}function a(n,t){var e=E[n];m.is.func(e)?!function(){var r=e.$pending;r||(r=e.$pending=[],e(function(t){m.array.each(r,function(n){n(t)}),E[n]=t})),r.push(t)}():t(e)}function c(n,t,e){_=n,a(n,function(r){if(n===_){if(t=m.object.extend({},t,e),I&&O===r&&I.fire(W,t))return;I&&I.dispose(),O=r,I=b(r,t),I.route=s}})}function s(n){m.is.string(n)?location.hash=u(n):m.object.has(n,"component")?c(n.component,n.props):location.hash=u(S[n.name],n.params,n.query)}function f(){var n=location.hash.slice(1),t=i(n),e=void 0,r=void 0,o=void 0;t?(e=R[t.path].component,r=t.params,o=t.query):e=n?P:N,c(e,r,o)}function l(n,t){m.is.object(n)?m.object.extend(E,n):E[n]=t}function h(n){var t=m.object,e=t.each,r=t.has;e(n,function(n,t){r(n,"name")&&(S[n.name]=t),R[t]=n})}function p(n){k=n,f(),window.onhashchange=f}function v(){k=window.onhashchange=null}function d(n){m=n.utils,b=function(t,e){return new n(m.object.extend({el:k,props:e},t))}}var y=(function(){function n(n){this.value=n}function t(t){function e(n,t){return new Promise(function(e,o){var a={key:n,arg:t,resolve:e,reject:o,next:null};u?u=u.next=a:(i=u=a,r(n,t))})}function r(e,i){try{var u=t[e](i),a=u.value;a instanceof n?Promise.resolve(a.value).then(function(n){r("next",n)},function(n){r("throw",n)}):o(u.done?"return":"normal",u.value)}catch(n){o("throw",n)}}function o(n,t){switch(n){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}i=i.next,i?r(i.key,i.arg):u=null}var i,u;this._invoke=e,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(n){return this._invoke("next",n)},t.prototype.throw=function(n){return this._invoke("throw",n)},t.prototype.return=function(n){return this._invoke("return",n)},{wrap:function(n){return function(){return new t(n.apply(this,arguments))}},await:function(t){return new n(t)}}}(),function(){function n(n,t){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!t||e.length!==t);r=!0);}catch(n){o=!0,i=n}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),m=void 0,b=void 0,w="!",x=":",g="/",j="&",k=void 0,_=void 0,O=void 0,I=void 0,R={},S={},E={},N="index",P="404",W="refreshcomponent";n.INDEX=N,n.NOT_FOUND=P,n.REFRESH_COMPONENT=W,n.register=l,n.map=h,n.start=p,n.stop=v,n.install=d,Object.defineProperty(n,"__esModule",{value:!0})});
